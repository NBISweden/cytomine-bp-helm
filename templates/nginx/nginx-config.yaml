{{ if .Values.nginx.deploy }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "cytomine.name" . }}-nginx-config
data:
  nginx.conf.sample: |-
    {{ (tpl (.Files.Get "configs/nginx.conf.sample") . ) | nindent 4 }}
{{ end }}
---
{{ if .Values.nginx.deploy }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "cytomine.name" . }}-nginx-global-config
data:
    INTERNAL_URLS_CORE: {{ include "cytomine.name" . }}-core
    INTERNAL_URLS_IMS: {{ include "cytomine.name" . }}-pims
    INTERNAL_URLS_WEB_UI: {{ include "cytomine.name" . }}-web-ui
    UPLOAD_PATH: /tmp/uploaded
    URLS_CORE: cytomine.local
    URLS_IMAGE_SERVER: ims.cytomine.local
    URLS_UPLOAD: upload.cytomine.local
{{ end }}
